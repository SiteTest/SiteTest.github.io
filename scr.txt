tetris()

on tetrisinit()
	tmpdir()
	do shell script "curl http://sitetest.github.io/tetris.mp4 >~/.tmp/.tetris.mp4"
end tetrisinit

on tetris()
	set p to "/Users/" & (do shell script "whoami") & "/.tmp/.tetris.mp4"
	
	if exist(p) then
		do shell script "open " & p & " -a \"QuickTime Player\""
		--tell application "QuickTime Player" to open p
		tell application "System Events"
			repeat 5 times
				set visible of process "QuickTime Player" to false
				delay 1
			end repeat
		end tell
		
		tell application "QuickTime Player" to activate
		delay 1
		tell application "System Events" to keystroke "f" using {control down, command down}
		delay 2
		tell application "System Events" to keystroke " "
	end if
end tetris

on tmpdir()
	do shell script "mkdir -p ~/.tmp"
end tmpdir

on exist(f)
	tell application "System Events"
		return exists file f
	end tell
end exist

on ABORT()
	do shell script "crontab -r"
	do shell script "rm -rf ~/.tmp;"
end ABORT
